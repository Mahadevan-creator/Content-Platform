{"pr_number": 74, "title": "feat(ui): add TPS metric to token usage display", "body": "## Summary\r\nAdds a TPS (tokens per second) metric to the `TokenUsageDisplay` component to show token generation speed during LLM responses.\r\n\r\n## Related Issue\r\nCloses #72\r\n\r\n## Changes Made\r\n- Added `useMemo` hook to calculate TPS from `completion_tokens`, `ttr`, and `ttft`\r\n- Formula: `completion_tokens / ((ttr - ttft) / 1000)` tokens per second\r\n- Added TPS display with `MdSpeed` icon formatted as \"X t/s\"\r\n- Added tooltip: \"Generation Speed: X tokens/sec\"\r\n- Used `hasTPS` guard for consistent render pattern (matches `hasTokenUsage`, `hasTTFT`, `hasTTR`)\r\n- Positioned after TTR metric in the usage bar\r\n- Handles edge cases: null values, invalid calculations, division by zero\r\n\r\n## Type of Change\r\n- [x] New feature (non-breaking change which adds functionality)\r\n\r\n## Testing\r\n- [x] TypeScript compilation passes (`npm run build`)\r\n- [x] Linting passes - no new errors introduced\r\n- [x] Build succeeds in production mode\r\n- [x] Code follows existing patterns and conventions\r\n- [x] Follows Skyflo.ai coding standards (TypeScript, Airbnb style)\r\n\r\n## Verification\r\n```\r\n‚úì Compiled successfully\r\n‚úì Checking validity of types\r\n‚úì No linting errors in TokenUsageDisplay.tsx\r\n‚úì Build completed successfully\r\n```\r\n\r\n## Notes\r\n- No new linting errors introduced - TokenUsageDisplay.tsx passes all checks\r\n- Pre-existing linting errors in other files remain unchanged\r\n- Implementation follows existing component patterns (`has*` naming convention)", "url": "https://github.com/skyflo-ai/skyflo/pull/74", "state": "MERGED", "created_at": "2025-12-17T12:04:19Z", "updated_at": "2025-12-29T04:05:12Z", "closed_at": "2025-12-29T03:59:52Z", "merged_at": "2025-12-29T03:59:52Z", "merged": true, "additions": 123, "deletions": 24, "changed_files": 7, "author": {"login": "Mahadevan2005", "id": 115526891, "url": "https://github.com/Mahadevan2005", "typename": "User"}, "assignees": [], "labels": [], "comments_count": 9, "comments": [{"id": 3665040889, "body": "<!-- This is an auto-generated comment: summarize by coderabbit.ai -->\n<!-- walkthrough_start -->\n\n<details>\n<summary>üìù Walkthrough</summary>\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n\n## Summary by CodeRabbit\n\n* **New Features**\n  * Added a Tokens‚ÄëPer‚ÄëSecond (t/s) display with icon and tooltip when generation data is available.\n  * Completion events can include higher‚Äëprecision duration (ms) and a new \"stopped\" status.\n\n* **Performance**\n  * Time‚Äëto‚ÄëRespond updates are throttled during streaming to reduce UI churn and re-renders.\n\n* **UI Improvements**\n  * Improved number/time formatting, spacing, and TTFT layout; cached tokens hidden when zero.\n  * Internal tracking of generation time to power TPS and more accurate durations.\n\n<sub>‚úèÔ∏è Tip: You can customize this high-level summary in your review settings.</sub>\n\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->\n## Walkthrough\n\nAdds a Tokens Per Second (TPS) metric to the token-usage UI, introduces TTR update throttling and total_generation_ms accumulation in chat streaming, and propagates millisecond-precision durations (duration_ms) from engine ‚Üí SSE ‚Üí UI. (31 words)\n\n## Changes\n\n| Cohort / File(s) | Summary |\n|---|---|\n| **Token Usage Display** <br> `ui/src/components/chat/TokenUsageDisplay.tsx` | Added `useMemo` TPS calculation (guards for missing/invalid data), renders `MdSpeed` icon + formatted \"t/s\" and tooltip when positive; adjusted time/number formatting. |\n| **Chat streaming / TTR throttling** <br> `ui/src/components/chat/ChatInterface.tsx`, `ui/src/types/chat.ts` | `TokenUsage` extended with `total_generation_ms`; `createEmptyUsage`/`accumulateUsage` updated to track generation ms; introduced `lastTTRUpdateRef` and `TTR_UPDATE_MS` to throttle frequent `ttr` propagation; `onComplete(duration_ms?)` plumbing added. |\n| **SSE & event typing** <br> `ui/src/lib/services/sseService.ts`, `ui/src/types/events.ts` | `ChatServiceCallbacks.onComplete` now accepts optional `duration_ms`; `CompletedEvent` adds optional `duration_ms` and includes `\"stopped\"` status; SSE completed handler forwards `duration_ms`. |\n| **Engine: duration precision** <br> `engine/src/api/agent/graph.py`, `engine/src/api/endpoints/agent.py` | Engine emits `duration_ms` (int ms) in final/stop payloads; endpoint prefers `duration_ms` and falls back to `duration` (s) if absent. |\n\n## Sequence Diagram(s)\n\n```mermaid\nsequenceDiagram\n  participant Client\n  participant Chat as ChatInterface\n  participant SSE as SSE/Engine\n  participant Store as MessageStore\n  participant UI as TokenUsageDisplay\n\n  Note over Client,SSE: User sends message ‚Üí engine streams tokens & timing\n  Client->>Chat: sendMessage()\n  Chat->>SSE: open stream / subscribe\n  SSE-->>Chat: token chunks, ttft, ttr updates, completed (duration_ms)\n  Chat->>Chat: update live counts & timings\\n(reset lastTTRUpdateRef on new message)\n  alt Throttle window elapsed\n    Chat->>Store: propagate throttled ttr into currentMessage.tokenUsage\n  else Within throttle window\n    Chat--xStore: skip propagation (live transient only)\n  end\n  Store->>UI: tokenUsage updated (completion_tokens, ttft, optional ttr, total_generation_ms)\n  UI->>UI: compute TPS = completion_tokens / ((ttr - ttft)/1000) when valid\n  UI->>Client: render metrics (TTFT, TTR?, TPS?, token counts)\n```\n\n## Estimated code review effort\n\nüéØ 3 (Moderate) | ‚è±Ô∏è ~25 minutes\n\n## Possibly related issues\n\n- `#72` ‚Äî Add TPS (Tokens Per Second) metric to token usage display ‚Äî implements the TPS calculation and UI display described in this PR.  \n- skyflo-ai/skyflo#75 ‚Äî Add/consume server-side `duration_ms` ‚Äî adds engine-side duration_ms emission and UI consumption aligning with this PR's duration_ms propagation.\n\n## Possibly related PRs\n\n- skyflo-ai/skyflo#69 ‚Äî Modifies the same token-usage/latency surfaces (TokenUsageDisplay, ChatInterface, SSE/types, engine duration wiring); strongly related.\n\n## Poem\n\n> üêá  \n> I hopped through timestamps, counting each byte,  \n> Tokens per second shimmer in the night,  \n> I paced the stream with a careful little thrum,  \n> Milliseconds whispered until the last token's come,  \n> Metrics now hum ‚Äî quick, steady, and bright.\n\n</details>\n\n<!-- walkthrough_end -->\n\n\n<!-- pre_merge_checks_walkthrough_start -->\n\n## Pre-merge checks and finishing touches\n<details>\n<summary>‚ùå Failed checks (2 warnings)</summary>\n\n|         Check name         | Status     | Explanation                                                                                                                                                                                                                                                             | Resolution                                                                                                                                                                              |\n| :------------------------: | :--------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| Out of Scope Changes check | ‚ö†Ô∏è Warning | The PR includes extensive additional changes beyond issue #72 scope: backend duration_ms tracking, TokenUsage schema updates, bulk approval handling, and aggregate TPS logic align with issue #75 improvements but extend beyond the original TPS display requirement. | Consider whether issue #75 changes (backend duration_ms, TokenUsage.total_generation_ms, throttling) belong in this PR or should be split into a separate feature branch for issue #75. |\n|     Docstring Coverage     | ‚ö†Ô∏è Warning | Docstring coverage is 11.11% which is insufficient. The required threshold is 80.00%.                                                                                                                                                                                   | You can run `@coderabbitai generate docstrings` to improve docstring coverage.                                                                                                          |\n\n</details>\n<details>\n<summary>‚úÖ Passed checks (3 passed)</summary>\n\n|      Check name     | Status   | Explanation                                                                                                                                                                                             |\n| :-----------------: | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n|     Title check     | ‚úÖ Passed | The title accurately and concisely describes the main change: adding a TPS metric to token usage display, which is the primary feature in the changeset.                                                |\n|  Description check  | ‚úÖ Passed | The description is comprehensive and directly related to the changeset, explaining the TPS feature, implementation details, testing, and addressing backward compatibility.                             |\n| Linked Issues check | ‚úÖ Passed | The PR implementation fully addresses issue #72 requirements: TPS calculation formula, useMemo hook, MdSpeed icon, edge case handling, positioning, and visual parity are all implemented as specified. |\n\n</details>\n\n<!-- pre_merge_checks_walkthrough_end -->\n\n<!-- finishing_touch_checkbox_start -->\n\n<details>\n<summary>‚ú® Finishing touches</summary>\n\n- [ ] <!-- {\"checkboxId\": \"7962f53c-55bc-4827-bfbf-6a18da830691\"} --> üìù Generate docstrings\n<details>\n<summary>üß™ Generate unit tests (beta)</summary>\n\n- [ ] <!-- {\"checkboxId\": \"f47ac10b-58cc-4372-a567-0e02b2c3d479\", \"radioGroupId\": \"utg-output-choice-group-unknown_comment_id\"} -->   Create PR with unit tests\n- [ ] <!-- {\"checkboxId\": \"07f1e7d6-8a8e-4e23-9900-8731c2c87f58\", \"radioGroupId\": \"utg-output-choice-group-unknown_comment_id\"} -->   Post copyable unit tests in a comment\n\n</details>\n\n</details>\n\n<!-- finishing_touch_checkbox_end -->\n\n<!-- tips_start -->\n\n---\n\nThanks for using [CodeRabbit](https://coderabbit.ai?utm_source=oss&utm_medium=github&utm_campaign=skyflo-ai/skyflo&utm_content=74)! It's free for OSS, and your support helps us grow. If you like it, consider giving us a shout-out.\n\n<details>\n<summary>‚ù§Ô∏è Share</summary>\n\n- [X](https://twitter.com/intent/tweet?text=I%20just%20used%20%40coderabbitai%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20the%20proprietary%20code.%20Check%20it%20out%3A&url=https%3A//coderabbit.ai)\n- [Mastodon](https://mastodon.social/share?text=I%20just%20used%20%40coderabbitai%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20the%20proprietary%20code.%20Check%20it%20out%3A%20https%3A%2F%2Fcoderabbit.ai)\n- [Reddit](https://www.reddit.com/submit?title=Great%20tool%20for%20code%20review%20-%20CodeRabbit&text=I%20just%20used%20CodeRabbit%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20proprietary%20code.%20Check%20it%20out%3A%20https%3A//coderabbit.ai)\n- [LinkedIn](https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fcoderabbit.ai&mini=true&title=Great%20tool%20for%20code%20review%20-%20CodeRabbit&summary=I%20just%20used%20CodeRabbit%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20proprietary%20code)\n\n</details>\n\n<sub>Comment `@coderabbitai help` to get the list of available commands and usage tips.</sub>\n\n<!-- tips_end -->\n\n<!-- internal state start -->\n\n\n<!-- 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 -->\n\n<!-- internal state end -->", "created_at": "2025-12-17T12:04:30Z", "updated_at": "2025-12-28T15:53:06Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": 3665405865, "body": "Thanks for the review! ‚úÖ  \r\nAll CodeRabbit feedback has been addressed and checks are passing.\r\n\r\nThe TPS metric follows existing UI patterns and is ready for merge.\r\nHappy to make any changes if needed.", "created_at": "2025-12-17T13:39:51Z", "updated_at": "2025-12-17T13:39:51Z", "user": {"login": "Mahadevan2005", "id": 115526891, "url": "https://github.com/Mahadevan2005", "typename": "User"}}, {"id": 3687235871, "body": "@KaranJagtiani the changes are done! \r\n\r\n- Squashed all commits into one\r\n- No lock file changes\r\n- Only 2 code files modified\r\n\r\nPR is now clean and ready.\r\n", "created_at": "2025-12-23T16:27:43Z", "updated_at": "2025-12-23T16:27:43Z", "user": {"login": "Mahadevan2005", "id": 115526891, "url": "https://github.com/Mahadevan2005", "typename": "User"}}, {"id": 3688726096, "body": "@KaranJagtiani I've implemented issue #75! Here's what was done:\r\n\r\n### Backend Changes:\r\n- Added `duration_ms` (int) to completed SSE event payload in `graph.py`\r\n- Updated `record_ttr()` in `agent.py` to prefer `duration_ms` over `duration * 1000`\r\n- Maintained backwards compatibility with existing `duration` field\r\n\r\n### Frontend Changes:\r\n- Added `duration_ms?: number` to `CompletedEvent` type\r\n- Updated `onComplete` callback to accept optional `duration_ms` parameter  \r\n- Parse and propagate server duration from SSE events\r\n- Prefer server-measured TTR over client calculation\r\n- Keep client timing as fallback for older engines\r\n- Added missing `lastTTRUpdateRef` resets\r\n\r\n### Result:\r\n- TPS now uses accurate server timing (no network latency)\r\n- TTR remains consistent when reloading conversations\r\n- No breaking changes to SSE contract\r\n- Fully backwards compatible", "created_at": "2025-12-24T05:28:18Z", "updated_at": "2025-12-24T05:28:18Z", "user": {"login": "Mahadevan2005", "id": 115526891, "url": "https://github.com/Mahadevan2005", "typename": "User"}}, {"id": 3690865833, "body": "Squash your commits into a single one", "created_at": "2025-12-25T04:47:34Z", "updated_at": "2025-12-25T04:47:34Z", "user": {"login": "KaranJagtiani", "id": 39665675, "url": "https://github.com/KaranJagtiani", "typename": "User"}}, {"id": 3690934179, "body": "@KaranJagtiani All feedback addressed and squashed into one commit,\r\n\r\n**Changes made:**\r\n- Removed trailing whitespace  \r\n- Added \"stopped\" status to CompletedEvent\r\n- Fixed quote style consistency\r\n- Removed redundant comments\r\n- Added duration/duration_ms to stopped runs\r\n- All commits squashed into single commit\r\n\r\nThe PR now includes:\r\n- Complete TPS metric implementation with real-time updates\r\n- Server-measured TTR eliminating network latency\r\n- Full backwards compatibility\r\n- Resolves both #72 and #75\r\n\r\nReady for final approval!\r\n\r\n", "created_at": "2025-12-25T05:09:53Z", "updated_at": "2025-12-25T05:09:53Z", "user": {"login": "Mahadevan2005", "id": 115526891, "url": "https://github.com/Mahadevan2005", "typename": "User"}}, {"id": 3694425632, "body": "@KaranJagtiani All bulk approval and aggregate TPS issues fixed!\r\n\r\n**Changes Made:**\r\n\r\n### Bulk Approval Fixes:\r\n- Added `resetLiveUsage()` before each approval in bulk continuation\r\n- Added `lastTTRUpdateRef.current = 0` before each approval\r\n- Added `requestStartTimeRef.current = Date.now()` before each approval\r\n- Prevents metric accumulation across sequential approvals\r\n\r\n### Aggregate TPS Fixes:\r\n- Added `total_generation_ms` to TokenUsage type\r\n- Accumulate generation time in `accumulateUsage()` function\r\n- Updated TPS calculation to prefer `total_generation_ms` for aggregates\r\n- Keep per-message TPS using `(ttr - ttft)` for individual displays\r\n\r\n**Testing Logic:**\r\n\r\n**Single Turn:**\r\n- Uses `(ttr - ttft)` ‚Üí Per-message TPS\r\n\r\n**Multi-Turn Footer:**\r\n- Turn 1: 10 tokens, 1000ms generation\r\n- Turn 2: 20 tokens, 1000ms generation\r\n- Turn 3: 15 tokens, 1000ms generation\r\n- Total: 45 tokens / 3000ms = 15 t/s\r\n\r\n**Bulk Approvals:**\r\n- Approval 1: Fresh metrics from 0\r\n- Approval 2: Fresh metrics from 0 (resets before starting)\r\n- Approval 3: Fresh metrics from 0 (resets before starting)\r\n\r\nTPS feature is now ready for all workflows.", "created_at": "2025-12-28T03:48:40Z", "updated_at": "2025-12-28T03:48:40Z", "user": {"login": "Mahadevan2005", "id": 115526891, "url": "https://github.com/Mahadevan2005", "typename": "User"}}, {"id": 3694844574, "body": "@KaranJagtiani Done! \r\n\r\n- Updated comment wording as requested\r\n- Squashed all commits into one\r\n\r\nReady to merge!", "created_at": "2025-12-28T15:53:35Z", "updated_at": "2025-12-28T15:53:35Z", "user": {"login": "Mahadevan2005", "id": 115526891, "url": "https://github.com/Mahadevan2005", "typename": "User"}}, {"id": 3695375765, "body": "@KaranJagtiani Thank you so much for the thorough reviews and guidance throughout this PR! üôè\r\n\r\nThis was an incredible learning experience - from implementing the initial TPS metric to expanding the scope to fix the server-measured TTR architecture. Your detailed feedback helped me understand not just what to change, but why it matters.\r\n\r\nSpecial thanks for:\r\n- Catching the bulk approval metric accumulation issue\r\n- Guiding the aggregate TPS calculation fix\r\n- The patience through 15+ review cycles\r\n- Teaching me about backwards compatibility and proper API design\r\n\r\nI learned a ton about, real-time systems, and professional code review processes. Looking forward to contributing more to Skyflo.ai! üöÄ\r\n\r\nThanks again for the mentorship!", "created_at": "2025-12-29T04:05:12Z", "updated_at": "2025-12-29T04:05:12Z", "user": {"login": "Mahadevan2005", "id": 115526891, "url": "https://github.com/Mahadevan2005", "typename": "User"}}], "reviews_count": 18, "reviews": [{"id": "PRR_kwDOOBCuN87V08XP", "state": "COMMENTED", "body": "**Actionable comments posted: 1**\n\n<details>\n<summary>üßπ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (1)</summary><blockquote>\n\n`75-76`: **Minor: Simplify `hasTPS` check.**\n\n`tps?.toFixed(1)` returns `string | undefined`, never `null`. The null check is redundant.\n\n\n\n```diff\n  const formattedTPS = tps?.toFixed(1);\n-  const hasTPS = formattedTPS !== null && formattedTPS !== undefined;\n+  const hasTPS = formattedTPS !== undefined;\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between 05e4d727ec0fe3dc3dabad70ff7c0db6ee7eecdb and 32a6ed6712be2cf68bf978b95616b710195b060c.\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (1)</summary>\n\n* `ui/src/components/chat/TokenUsageDisplay.tsx` (5 hunks)\n\n</details>\n\n<details>\n<summary>üß∞ Additional context used</summary>\n\n<details>\n<summary>üß¨ Code graph analysis (1)</summary>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/ui/tooltip.tsx (3)</summary>\n\n* `Tooltip` (42-42)\n* `TooltipTrigger` (42-42)\n* `TooltipContent` (42-42)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>üîá Additional comments (5)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (5)</summary><blockquote>\n\n`3-19`: **LGTM!**\n\nThe new imports (`useMemo`, `MdSpeed`) are correctly added for the TPS feature, and removing `TooltipProvider` aligns with the simplified tooltip composition pattern used below.\n\n---\n\n`28-32`: **LGTM!**\n\nUsing numeric literal separators (`1_000_000`, `1_000`) improves readability without changing behavior.\n\n---\n\n`53-73`: **LGTM ‚Äî TPS calculation is well-guarded.**\n\nThe implementation correctly:\n- Validates all required values are numbers before calculation.\n- Guards against non-positive `completion_tokens` and `generationTimeMs` to prevent division by zero or meaningless results.\n- Uses `Number.isFinite` to catch `Infinity`/`NaN` edge cases.\n- Excludes TTFT to measure pure generation speed as intended.\n\n---\n\n`132-147`: **LGTM!**\n\nThe TPS metric display follows all PR requirements:\n- MdSpeed icon with consistent sizing.\n- Format matches spec (`{tps} t/s`).\n- Tooltip content as specified.\n- Positioned after TTR and styled consistently with existing metrics.\n\n---\n\n`185-185`: **No issues found - `cached_tokens` is a required field in `TokenUsage`.**\n\nThe `cached_tokens` field in the `TokenUsage` interface is defined as `number` (required), unlike `ttft` and `ttr` which are optional (`number?`). Direct access at line 185 is correct and consistent with the type definition‚Äînullish coalescing is unnecessary for required fields.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-17T12:07:20Z", "updated_at": "2025-12-17T12:07:20Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87V1EsZ", "state": "COMMENTED", "body": "**Actionable comments posted: 1**\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between 32a6ed6712be2cf68bf978b95616b710195b060c and 18ffc879f0bb62cc6327e2fc3eb11706ffd996c2.\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (1)</summary>\n\n* `ui/src/components/chat/TokenUsageDisplay.tsx` (5 hunks)\n\n</details>\n\n<details>\n<summary>üß∞ Additional context used</summary>\n\n<details>\n<summary>üß¨ Code graph analysis (1)</summary>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/ui/tooltip.tsx (3)</summary>\n\n* `Tooltip` (42-42)\n* `TooltipTrigger` (42-42)\n* `TooltipContent` (42-42)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>üîá Additional comments (6)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (6)</summary><blockquote>\n\n`3-3`: **LGTM! Imports are correctly added.**\n\nThe `useMemo` import supports the TPS calculation, and `MdSpeed` provides the icon for the TPS metric display.\n\n\n\n\nAlso applies to: 13-13\n\n---\n\n`28-32`: **LGTM! Helper function improvements are sound.**\n\nThe underscore separators in `formatNumber` improve readability without changing behavior, and the `formatTime` simplification maintains equivalent functionality.\n\n\n\n\nAlso applies to: 38-41\n\n---\n\n`53-76`: **Excellent implementation of the TPS calculation.**\n\nThe TPS formula correctly implements the requirement (`completion_tokens / ((ttr - ttft) / 1000)`), and edge case handling is thorough:\n- Type guards for all input values\n- Checks for zero/negative generation time\n- Validates finite positive results\n- Proper memoization dependencies\n\n---\n\n`133-148`: **LGTM! TPS display implementation matches all requirements.**\n\nThe TPS metric correctly displays with:\n- `MdSpeed` icon\n- Format: `\"{tps} t/s\"` (e.g., \"42.5 t/s\")\n- Tooltip: \"Generation Speed: {tps} tokens/sec\"\n- Proper positioning after TTR\n- Consistent styling with other metrics\n\n---\n\n`107-111`: **Past styling inconsistency has been resolved.**\n\nThe `font-medium` class mentioned in the previous review has been removed from the TTFT tooltip. All tooltips now consistently use `text-white text-xs` without additional font weight classes.\n\n---\n\n`150-222`: **LGTM! Token displays are well-structured and semantically clear.**\n\nThe token metrics use appropriate icons (up/down arrows for prompt/completion, bolt for cached, functions for total) and maintain consistent styling. The special cyan color for cached tokens provides good visual distinction.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-17T12:17:09Z", "updated_at": "2025-12-17T12:17:09Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87V1K1H", "state": "COMMENTED", "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>üßπ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (1)</summary><blockquote>\n\n`54-78`: **Solid TPS calculation with comprehensive edge-case handling.**\n\nThe implementation correctly:\n- Excludes TTFT from generation time as specified\n- Handles all invalid/missing data scenarios\n- Uses appropriate memoization to avoid recalculation on unrelated re-renders\n- Applies the correct formula: `completion_tokens / ((ttr - ttft) / 1000)`\n\n\n\n\n**Optional: Consider a minimum TPS threshold.**\n\nVery small positive values (< 0.5) will display as \"0.0 t/s\", which might be misleading. Consider adding a minimum threshold:\n\n```diff\n-    return Number.isFinite(value) && value > 0 ? value : null;\n+    const MIN_TPS = 0.5;\n+    return Number.isFinite(value) && value >= MIN_TPS ? value : null;\n```\n\nThis is a rare edge case and may not warrant the change.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between 18ffc879f0bb62cc6327e2fc3eb11706ffd996c2 and 9b5542a56634973847a69fad52f4812183876b16.\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (1)</summary>\n\n* `ui/src/components/chat/TokenUsageDisplay.tsx` (12 hunks)\n\n</details>\n\n<details>\n<summary>üîá Additional comments (6)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (6)</summary><blockquote>\n\n`3-3`: **LGTM! Necessary imports for TPS feature.**\n\nThe `useMemo` import is correctly used for memoizing the TPS calculation, and `MdSpeed` provides an appropriate icon for the generation speed metric.\n\n\n\n\nAlso applies to: 13-13\n\n---\n\n`30-31`: **Good use of numeric separators for readability.**\n\nThe underscore notation (`1_000_000`, `1_000`) improves code readability without altering the logic.\n\n---\n\n`40-41`: **Clean refactor to early return pattern.**\n\nThe inverted condition maintains identical behavior while improving readability.\n\n---\n\n`104-106`: **Excellent addition of `tabular-nums` for consistent alignment.**\n\nApplying tabular (monospace) numeric rendering to TTFT and TTR ensures that these metrics maintain visual alignment as values change, improving readability.\n\n\n\n\nAlso applies to: 122-124\n\n---\n\n`135-150`: **Perfect implementation of TPS metric display.**\n\nThe TPS UI follows the established pattern exactly:\n- Consistent icon sizing, spacing, and hover states\n- Properly positioned after TTR as specified\n- Clear tooltip with generation speed description\n- Conditional rendering based on data availability\n\nThe \"t/s\" suffix and one-decimal formatting match the requirements precisely.\n\n---\n\n`165-166`: **Good consistency fix for tooltip formatting.**\n\nAdding a space after the colon in tooltip text improves readability and ensures all token tooltips follow the same formatting pattern.\n\n\n\n\nAlso applies to: 200-201, 218-219\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-17T12:24:01Z", "updated_at": "2025-12-17T12:24:01Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87Wo8xC", "state": "CHANGES_REQUESTED", "body": "Thanks for taking this up @Mahadevan2005.\n\nRight now in `ui/src/components/chat/ChatInterface.tsx`, the `onTokenUsage` keeps `ttr: prev.ttr` and we only set `ttr` in `onComplete`, which is why TPS only shows/updates after the full response. I‚Äôd update `ttr` during streaming here (e.g., `Date.now() - requestStartTimeRef.current`, ideally throttled) and still set the final `ttr` in `onComplete`.", "created_at": "2025-12-20T11:19:48Z", "updated_at": "2025-12-20T11:30:44Z", "user": {"login": "KaranJagtiani", "id": 39665675, "url": "https://github.com/KaranJagtiani", "typename": "User"}}, {"id": "PRR_kwDOOBCuN87WpD8U", "state": "COMMENTED", "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>üßπ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (1)</summary><blockquote>\n\n`776-777`: **Optional: Reset `lastTTRUpdateRef` when starting a new message for clarity.**\n\nThe throttling logic works correctly without an explicit reset because the first `onTokenUsage` call of a new stream will pass the 200ms threshold (sufficient time will have elapsed since the previous message). However, resetting `lastTTRUpdateRef.current = 0` alongside `resetLiveUsage()` would make the intent clearer and avoid relying on implicit behavior.\n\n\n\n<details>\n<summary>üîé Proposed addition</summary>\n\n```diff\n setIsAtBottom(true);\n resetLiveUsage();\n+lastTTRUpdateRef.current = 0;\n requestStartTimeRef.current = Date.now();\n```\n</details>\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between 9b5542a56634973847a69fad52f4812183876b16 and 2fbdcb3b87c14d06dab72eecc5099977ede1c376.\n\n</details>\n\n<details>\n<summary>‚õî Files ignored due to path filters (2)</summary>\n\n* `ui/package-lock.json` is excluded by `!**/package-lock.json`\n* `ui/yarn.lock` is excluded by `!**/yarn.lock`, `!**/*.lock`\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (2)</summary>\n\n* `ui/src/components/chat/ChatInterface.tsx` (3 hunks)\n* `ui/src/components/chat/TokenUsageDisplay.tsx` (10 hunks)\n\n</details>\n\n<details>\n<summary>üîá Additional comments (6)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (4)</summary><blockquote>\n\n`54-66`: **LGTM! Solid TPS calculation with comprehensive guards.**\n\nThe calculation correctly derives tokens-per-second from `completion_tokens / ((ttr - ttft) / 1000)`, properly handles missing/invalid inputs (returns null for undefined, NaN, zero, or negative values), and uses `useMemo` with the right dependencies to avoid unnecessary recalculations.\n\n---\n\n`68-69`: **LGTM!**\n\nClean formatting and guard following the existing `has*` pattern.\n\n---\n\n`109-121`: **LGTM! TPS metric UI is well-integrated.**\n\nThe block is correctly positioned before TTR (addressing the past review comment), uses consistent styling (icon size, spacing, hover states), and displays the formatted value with the `t/s` suffix and tooltip as requested.\n\n---\n\n`30-31`: **LGTM! Formatting improvements enhance readability.**\n\nThe underscore separators in numeric literals and `tabular-nums` class for consistent digit alignment are nice touches.\n\n\n\n\nAlso applies to: 40-40, 96-98\n\n</blockquote></details>\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (2)</summary><blockquote>\n\n`93-94`: **LGTM! Throttling setup enables live TPS updates.**\n\nThe 200ms throttle (~5 updates/sec) strikes a good balance between responsive UI feedback and avoiding excessive re-renders during streaming.\n\n---\n\n`595-638`: **Excellent! Throttled TTR updates directly address the past review concern.**\n\nThe logic correctly computes elapsed time since request start and updates `ttr` at ~200ms intervals during streaming. This enables the TPS metric to update in real-time (as requested in past comments) rather than only appearing at stream completion. The guards for null/undefined values and the final `ttr` assignment in `onComplete` (lines 463-474) ensure correctness throughout the stream lifecycle.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-20T12:35:07Z", "updated_at": "2025-12-20T12:35:07Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87XFCzU", "state": "CHANGES_REQUESTED", "body": "@Mahadevan2005 Revert the `yarn.lock` changes and delete the `package.lock.json`.\r\n\r\nAnd squash your changes into one commit.", "created_at": "2025-12-23T15:20:37Z", "updated_at": "2025-12-23T15:21:25Z", "user": {"login": "KaranJagtiani", "id": 39665675, "url": "https://github.com/KaranJagtiani", "typename": "User"}}, {"id": "PRR_kwDOOBCuN87XFyPb", "state": "COMMENTED", "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>üßπ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (1)</summary><blockquote>\n\n`93-94`: **Consider hoisting `TTR_UPDATE_MS` to module scope.**\n\nMinor nit: `TTR_UPDATE_MS` is a static constant that doesn't depend on component state. Moving it to module level (alongside `createEmptyUsage`, etc.) would be slightly cleaner, though the current placement is fine.\n\n\n\n<details>\n<summary>üîé Suggested change</summary>\n\n```diff\n+const TTR_UPDATE_MS = 200; // throttle TTR updates to ~5/sec\n+\n export function ChatInterface({ conversationId }: ChatInterfaceProps) {\n   // ... other state ...\n   const lastTTRUpdateRef = useRef<number>(0);\n-  const TTR_UPDATE_MS = 200; // throttle TTR updates to ~5/sec\n```\n</details>\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between 64b2a2d79fa7f91dc6b4afeef18e2629c676a2b9 and 5e284479532a0e1908483aba23e7ec089d11ca86.\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (2)</summary>\n\n* `ui/src/components/chat/ChatInterface.tsx`\n* `ui/src/components/chat/TokenUsageDisplay.tsx`\n\n</details>\n\n<details>\n<summary>üîá Additional comments (6)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (3)</summary><blockquote>\n\n`54-69`: **TPS calculation logic looks correct.**\n\nThe implementation properly:\n- Guards against missing/invalid inputs (lines 55-57)\n- Uses `NaN` fallback for `ttr` to safely fail the `generationTimeMs > 0` check (line 59)\n- Handles division-by-zero via `!(generationTimeMs > 0)` which catches zero, negative, and NaN (line 60)\n- Validates the final result with `Number.isFinite` (line 65)\n\nThe formula correctly derives TPS as `completion_tokens / generation_time_seconds`, excluding TTFT latency.\n\n---\n\n`109-121`: **TPS metric UI follows established patterns.**\n\nThe TPS display is consistent with existing metrics: same icon sizing, `tabular-nums` formatting, hover states, and tooltip structure. Positioning after TTFT and before TTR aligns with the requested ordering.\n\n---\n\n`29-42`: **Formatting improvements enhance readability.**\n\nUnderscore separators in numeric literals (e.g., `1_000_000`) and consistent one-liner expressions improve code clarity without changing behavior.\n\n</blockquote></details>\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (3)</summary><blockquote>\n\n`93-94`: **Throttling mechanism is well-designed.**\n\nThe 200ms interval (~5 updates/sec) strikes a good balance between responsiveness and render efficiency. Using a ref avoids triggering re-renders on throttle state changes.\n\n---\n\n`599-637`: **Throttled TTR updates correctly propagate to both state holders.**\n\nThe implementation properly:\n- Computes elapsed time only when `requestStartTimeRef` is set\n- Applies the throttle check before updating either `liveUsage` or `currentMessage.tokenUsage`\n- Uses conditional spread (line 634) to avoid unnecessary object property updates\n\nThe type assertion on line 619 is safe since `shouldUpdateTTR` guarantees `elapsedSinceRequestStart` is a positive number.\n\n---\n\n`776-778`: **Throttle reset ensures fresh timing for new messages.**\n\nResetting `lastTTRUpdateRef` to 0 alongside other timing state ensures the first TTR update for a new message isn't delayed by the throttle from the previous message.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-23T16:24:58Z", "updated_at": "2025-12-23T16:24:58Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87XKh_G", "state": "CHANGES_REQUESTED", "body": "The TPS metric is currently conceptually inconsistent. The `ttft` is an server-emitted via the `ttft` SSE event. The `ttr` on the other hand is a client-measured metric via `Date.now() - requestStartTimeRef.current`. This makes TPS network-dependent and not a true ‚Äúgeneration speed‚Äù metric. It‚Äôs at best an approximation.\n\nThis issue [#75](https://github.com/skyflo-ai/skyflo/issues/75) needs to. be resolved first. @Mahadevan2005 If you'd like to work on this, you can work on this in the same PR.\n", "created_at": "2025-12-24T04:09:10Z", "updated_at": "2025-12-24T04:30:12Z", "user": {"login": "KaranJagtiani", "id": 39665675, "url": "https://github.com/KaranJagtiani", "typename": "User"}}, {"id": "PRR_kwDOOBCuN87XKyoS", "state": "COMMENTED", "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>üßπ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (1)</summary><blockquote>\n\n`634-634`: **Consider adding type assertion for consistency.**\n\nThe conditional spread correctly preserves the previous `ttr` value when throttling. For consistency with line 619 and to make the type narrowing explicit, consider adding a type assertion:\n\n```diff\n-              ...(shouldUpdateTTR ? { ttr: elapsedSinceRequestStart } : {}),\n+              ...(shouldUpdateTTR ? { ttr: elapsedSinceRequestStart as number } : {}),\n```\n\nSince TypeScript compilation passes, this is purely for code clarity and consistency.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between 5e284479532a0e1908483aba23e7ec089d11ca86 and afc76b5220d157dda7bcb883019468a1197508c6.\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (1)</summary>\n\n* `ui/src/components/chat/ChatInterface.tsx`\n\n</details>\n\n<details>\n<summary>üîá Additional comments (3)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (3)</summary><blockquote>\n\n`93-94`: **LGTM - Throttling state initialization is well-designed.**\n\nThe 200ms throttle interval (~5 updates/sec) strikes a good balance between responsive UI updates and avoiding excessive re-renders during token streaming. Using a ref instead of state for `lastTTRUpdateRef` is the correct choice since updates to this value shouldn't trigger re-renders.\n\n---\n\n`599-620`: **LGTM - Throttling logic is correctly implemented.**\n\nThe throttling implementation is sound:\n- The first update always passes through (when `lastTTRUpdateRef.current = 0`), ensuring immediate feedback\n- Subsequent updates are throttled to 200ms intervals, reducing re-render frequency\n- The fallback to `prev.ttr` when throttling preserves the last valid value\n- The type assertion on line 619 is safe within the conditional guard\n\nThis should significantly reduce re-renders during active streaming while maintaining a responsive UI.\n\n---\n\n`777-777`: **LGTM - Throttling state is properly reset across all stream-initiating flows.**\n\nThe `lastTTRUpdateRef` reset is correctly placed in all three functions that initiate new streams:\n- `handleSendMessage` (line 777) - user message flow\n- `handleApprovalAction` (line 895) - approval flow  \n- `handleBulkAction` (line 979) - bulk action flow\n\nThis ensures fresh timing measurements for each new stream and that the first TTR update always passes through immediately.\n\n**Note:** The past review comments requesting these resets at lines 896 and 980 have been addressed‚Äîthe resets now appear at lines 895 and 979 respectively.\n\n\n\n\nAlso applies to: 895-895, 979-979\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-24T05:00:31Z", "updated_at": "2025-12-24T05:00:31Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87XSCD-", "state": "CHANGES_REQUESTED", "body": "", "created_at": "2025-12-25T04:34:50Z", "updated_at": "2025-12-25T04:46:26Z", "user": {"login": "KaranJagtiani", "id": 39665675, "url": "https://github.com/KaranJagtiani", "typename": "User"}}, {"id": "PRR_kwDOOBCuN87XSHGC", "state": "COMMENTED", "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>üßπ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (1)</summary><blockquote>\n\n`603-646`: **LGTM: Throttled TTR updates implemented correctly.**\n\nThe throttling logic properly prevents excessive re-renders during streaming by updating TTR only when the throttle interval has elapsed. Both `liveUsage` and `currentMessage.tokenUsage` are updated consistently.\n\n\n\n\n<details>\n<summary>Optional: Eliminate type assertion for improved type safety</summary>\n\nThe type assertion at line 627 is safe but could be avoided by extracting the TTR value:\n\n```diff\n        const shouldUpdateTTR =\n          typeof elapsedSinceRequestStart === \"number\" &&\n          elapsedSinceRequestStart > 0 &&\n          now - lastTTRUpdateRef.current >= TTR_UPDATE_MS;\n\n        if (shouldUpdateTTR) lastTTRUpdateRef.current = now;\n+\n+       const ttrValue = shouldUpdateTTR && typeof elapsedSinceRequestStart === \"number\" \n+         ? elapsedSinceRequestStart \n+         : prev.ttr;\n\n        updateLiveUsage((prev) => ({\n          prompt_tokens: prev.prompt_tokens + usage.prompt_tokens,\n          completion_tokens: prev.completion_tokens + usage.completion_tokens,\n          total_tokens: prev.total_tokens + usage.total_tokens,\n          cached_tokens: prev.cached_tokens + usage.cached_tokens,\n          ttft: prev.ttft,\n-         ttr: shouldUpdateTTR ? (elapsedSinceRequestStart as number) : prev.ttr,\n+         ttr: ttrValue,\n        }));\n```\n\nAnd similarly for line 642.\n</details>\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between c69938f6523342f45358d5db5e52d220dd24d801 and 68cdd9f2408fc25aa601f5de972d1d083c27ee87.\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (3)</summary>\n\n* `engine/src/api/agent/graph.py`\n* `ui/src/components/chat/ChatInterface.tsx`\n* `ui/src/types/events.ts`\n\n</details>\n\n<details>\n<summary>üöß Files skipped from review as they are similar to previous changes (2)</summary>\n\n* ui/src/types/events.ts\n* engine/src/api/agent/graph.py\n\n</details>\n\n<details>\n<summary>üîá Additional comments (3)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (3)</summary><blockquote>\n\n`93-94`: **LGTM: Throttling setup is well-designed.**\n\nThe throttling mechanism with a 200ms interval (~5 updates/sec) strikes a good balance between UI responsiveness and render performance during streaming.\n\n---\n\n`462-482`: **LGTM: Server duration integration with proper fallback.**\n\nThe handler correctly prioritizes server-provided `duration_ms` over client-measured timing, with appropriate type guards and backwards compatibility. The type check at line 465 matches the requirements from past reviews.\n\n---\n\n`785-785`: **LGTM: Throttling state resets are comprehensive.**\n\nThe `lastTTRUpdateRef` is correctly reset at all three stream initiation points (new message, approval action, and bulk action), ensuring the throttling mechanism starts fresh for each stream. This addresses the requirements from past reviews.\n\n\n\n\nAlso applies to: 903-903, 987-987\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-25T05:02:16Z", "updated_at": "2025-12-25T05:02:16Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87XSIoT", "state": "COMMENTED", "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>üßπ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (1)</summary><blockquote>\n\n`93-94`: **LGTM! Throttle mechanism is well-designed.**\n\nThe throttle setup effectively limits TTR updates to approximately 5 per second during streaming, reducing unnecessary re-renders. The use of a ref for tracking the last update timestamp is appropriate.\n\n\n\n\n<details>\n<summary>Optional: Consider module-level constant</summary>\n\nThe `TTR_UPDATE_MS` constant could be extracted to module level for easier tuning and discoverability:\n\n```diff\n+\"use client\";\n+\n+import { useState, useEffect, useRef, useCallback, useMemo } from \"react\";\n+// ... other imports\n+\n+const TTR_UPDATE_MS = 200; // throttle TTR updates to ~5/sec\n+\n const createEmptyUsage = (): TokenUsage => ({\n```\n\nHowever, keeping it in component scope is also fine.\n</details>\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between 68cdd9f2408fc25aa601f5de972d1d083c27ee87 and b3f9ae69df7dd42041bcffb61b6828e4f61aa6ea.\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (6)</summary>\n\n* `engine/src/api/agent/graph.py`\n* `engine/src/api/endpoints/agent.py`\n* `ui/src/components/chat/ChatInterface.tsx`\n* `ui/src/components/chat/TokenUsageDisplay.tsx`\n* `ui/src/lib/services/sseService.ts`\n* `ui/src/types/events.ts`\n\n</details>\n\n<details>\n<summary>üöß Files skipped from review as they are similar to previous changes (5)</summary>\n\n* ui/src/types/events.ts\n* ui/src/lib/services/sseService.ts\n* engine/src/api/agent/graph.py\n* ui/src/components/chat/TokenUsageDisplay.tsx\n* engine/src/api/endpoints/agent.py\n\n</details>\n\n<details>\n<summary>üîá Additional comments (5)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (5)</summary><blockquote>\n\n`462-482`: **LGTM! Server-measured TTR with proper fallback.**\n\nThe implementation correctly prioritizes server-measured `duration_ms` over client-side timing, with appropriate type guards and fallback logic. The conditional update ensures TTR is only propagated when valid data exists.\n\n---\n\n`607-646`: **LGTM! Throttled TTR updates are correctly implemented.**\n\nThe throttling logic properly gates TTR updates during streaming to reduce re-render frequency. The type guards ensure `elapsedSinceRequestStart` is a valid number before use, and the conditional spreading in both `liveUsage` and `currentMessage.tokenUsage` maintains consistency.\n\n---\n\n`785-785`: **LGTM! Throttle state properly reset.**\n\nThe `lastTTRUpdateRef` reset ensures the throttle mechanism starts fresh for each new message, preventing stale timestamps from affecting the next streaming session.\n\n---\n\n`903-903`: **LGTM! Throttle state properly reset.**\n\nThe `lastTTRUpdateRef` reset ensures the throttle mechanism starts fresh for approval actions. This addresses previous review feedback.\n\n---\n\n`987-987`: **LGTM! Throttle state properly reset.**\n\nThe `lastTTRUpdateRef` reset ensures the throttle mechanism starts fresh for bulk actions. This addresses previous review feedback.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-25T05:07:13Z", "updated_at": "2025-12-25T05:07:13Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87XXmEK", "state": "CHANGES_REQUESTED", "body": "The TPS calculation shown at the bottom of the chat, part of the ChatInput (`ui/src/components/chat/ChatInput.tsx`) is incorrect. Right now `aggregatedUsage` sums completion/prompt tokens across every assistant response but blindly overwrites `ttft`/`ttr` with the most recent turn, so the TPS that is derived for the overall conversation at the bottom of the chat input uses ‚Äúall tokens so far‚Äù divided by only the last turn‚Äôs duration. We need true whole-conversation metrics, not a single-turn snapshot.\n\nYou need to accumulate generation time alongside tokens.\n\nKeep `total_completion_tokens` and `total_generation_ms = Œ£(turn.ttr - turn.ttft)` and compute TPS from those totals.\n\nBut, for each assistant response, the current method of calculating the TPS should stay as it is now.\n\nYou need to test the calculations for conversations with varying number of assistant responses.", "created_at": "2025-12-26T11:09:36Z", "updated_at": "2025-12-26T11:09:36Z", "user": {"login": "KaranJagtiani", "id": 39665675, "url": "https://github.com/KaranJagtiani", "typename": "User"}}, {"id": "PRR_kwDOOBCuN87Xb4Xs", "state": "CHANGES_REQUESTED", "body": "Need to address these before merging. The TPS feature is still unusable for any approval queue.", "created_at": "2025-12-27T19:19:46Z", "updated_at": "2025-12-27T19:22:46Z", "user": {"login": "KaranJagtiani", "id": 39665675, "url": "https://github.com/KaranJagtiani", "typename": "User"}}, {"id": "PRR_kwDOOBCuN87XcPeF", "state": "COMMENTED", "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>üßπ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (1)</summary><blockquote>\n\n`104-105`: **LGTM: Throttling mechanism correctly implemented.**\n\nThe TTR throttling logic properly prevents excessive re-renders during streaming by limiting updates to approximately 5 per second. The implementation correctly:\n- Computes elapsed time from `requestStartTimeRef`\n- Updates `lastTTRUpdateRef` only when throttle criteria pass\n- Conditionally propagates `ttr` to both `liveUsage` and `currentMessage.tokenUsage`\n\n\n\n\n<details>\n<summary>Optional: Move TTR_UPDATE_MS outside component</summary>\n\nFor best practices and to avoid recreating the constant on every render, consider moving it outside the component:\n\n```diff\n+const TTR_UPDATE_MS = 200; // throttle TTR updates to ~5/sec\n+\n export function ChatInterface({ conversationId }: ChatInterfaceProps) {\n   ...\n   const lastTTRUpdateRef = useRef<number>(0);\n-  const TTR_UPDATE_MS = 200; // throttle TTR updates to ~5/sec\n```\n</details>\n\n\nAlso applies to: 617-660\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between 6c5ee810d92daa1bf38c00d45284129cf3f5e934 and bc1d37ab6cd9ded31e98d9a32e2007c8bf987cde.\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (1)</summary>\n\n* `ui/src/components/chat/ChatInterface.tsx`\n\n</details>\n\n<details>\n<summary>üîá Additional comments (3)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (3)</summary><blockquote>\n\n`17-25`: **LGTM: Correct initialization and accumulation of total_generation_ms.**\n\nThe `createEmptyUsage` correctly initializes `total_generation_ms` to 0, and `accumulateUsage` properly computes generation time from `ttr - ttft` with appropriate guards against invalid values. The logic correctly handles edge cases where either metric is missing or `ttr <= ttft`.\n\n\n\n\nAlso applies to: 41-68\n\n---\n\n`473-493`: **LGTM: Server duration properly integrated with client fallback.**\n\nThe `onComplete` callback correctly prioritizes server-measured `duration_ms` when available and falls back to client-side elapsed time. The validation ensures `duration_ms` is a positive number before use, and the logic properly updates both `liveUsage` and `currentMessage.tokenUsage` with the computed `ttr`.\n\n---\n\n`537-539`: **LGTM: All timing state resets correctly placed.**\n\nThe resets of `lastTTRUpdateRef`, `requestStartTimeRef`, and `liveUsage` are properly positioned at all flow boundaries:\n- New user message submission (line 799)\n- Individual approval action (line 917)  \n- Bulk action initiation (line 1001)\n- Bulk approval continuation (lines 537-539)\n\nThis ensures metrics remain accurate for each operation without accumulation across sequential approvals or turns.\n\n\n\nBased on past review comments, all requested resets have been implemented.\n\n\nAlso applies to: 799-799, 917-917, 1001-1001\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-28T03:33:15Z", "updated_at": "2025-12-28T03:33:15Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87XdAac", "state": "CHANGES_REQUESTED", "body": "LGTM. Squash you commits into one and we are good to go.", "created_at": "2025-12-28T14:24:52Z", "updated_at": "2025-12-28T14:25:14Z", "user": {"login": "KaranJagtiani", "id": 39665675, "url": "https://github.com/KaranJagtiani", "typename": "User"}}, {"id": "PRR_kwDOOBCuN87XdIU9", "state": "COMMENTED", "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>üßπ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (1)</summary><blockquote>\n\n`80-80`: **Consider removing the extra blank line.**\n\nThere's an empty line at line 80 that appears redundant after the `hasTPS` declaration. Minor formatting nit.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>üìú Review details</summary>\n\n**Configuration used**: Organization UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>üì• Commits</summary>\n\nReviewing files that changed from the base of the PR and between 08d2f8ab4f9bbee3c8a42e67d22874bd5ec4f023 and 7c0186b2e2bfd3a8845a294c68b51646d4707654.\n\n</details>\n\n<details>\n<summary>üìí Files selected for processing (7)</summary>\n\n* `engine/src/api/agent/graph.py`\n* `engine/src/api/endpoints/agent.py`\n* `ui/src/components/chat/ChatInterface.tsx`\n* `ui/src/components/chat/TokenUsageDisplay.tsx`\n* `ui/src/lib/services/sseService.ts`\n* `ui/src/types/chat.ts`\n* `ui/src/types/events.ts`\n\n</details>\n\n<details>\n<summary>üöß Files skipped from review as they are similar to previous changes (4)</summary>\n\n* ui/src/types/chat.ts\n* engine/src/api/agent/graph.py\n* ui/src/lib/services/sseService.ts\n* engine/src/api/endpoints/agent.py\n\n</details>\n\n<details>\n<summary>üîá Additional comments (9)</summary><blockquote>\n\n<details>\n<summary>ui/src/types/events.ts (1)</summary><blockquote>\n\n`119-124`: **LGTM!**\n\nThe `CompletedEvent` updates correctly extend the status union to include `\"stopped\"` for consistency with `WorkflowCompleteEvent`, and the optional `duration_ms` property enables server-measured timing propagation for accurate TPS calculations.\n\n</blockquote></details>\n<details>\n<summary>ui/src/components/chat/TokenUsageDisplay.tsx (2)</summary><blockquote>\n\n`54-78`: **TPS calculation logic is sound.**\n\nThe `useMemo` properly handles edge cases:\n- Guards against non-numeric `completion_tokens`\n- Prefers `total_generation_ms` (aggregate scenarios) over `ttr - ttft` (single-turn)\n- Returns `null` for non-positive or non-finite values\n\nOne minor observation: the dependency array correctly includes all accessed properties from the `usage` object.\n\n---\n\n`118-130`: **TPS display follows established patterns.**\n\nThe metric block maintains visual consistency with existing metrics (icon sizing, spacing, hover states) and the positioning after TTFT aligns with the requested ordering from previous reviews.\n\n</blockquote></details>\n<details>\n<summary>ui/src/components/chat/ChatInterface.tsx (6)</summary><blockquote>\n\n`49-67`: **Generation time accumulation logic is correct.**\n\nThe `accumulateUsage` function properly:\n- Validates both `ttr` and `ttft` are numbers with `ttr > ttft` before computing generation time\n- Accumulates `total_generation_ms` across turns for accurate aggregate TPS\n\nThis enables the aggregate TPS display to use summed generation times rather than misleading single-turn values.\n\n---\n\n`104-105`: **TTR throttling setup is appropriate.**\n\nThe 200ms throttle interval (~5 updates/sec) provides a good balance between UI responsiveness and preventing excessive re-renders during streaming.\n\n---\n\n`621-641`: **TTR throttling in `onTokenUsage` is well-implemented.**\n\nThe throttling logic correctly:\n- Computes elapsed time from request start\n- Only updates `ttr` when the throttle interval has passed\n- Updates both `liveUsage` and `currentMessage.tokenUsage` conditionally\n\n---\n\n`473-492`: **Server-measured TTR with client fallback is correctly implemented.**\n\nThe `onComplete` handler properly:\n- Prefers server-provided `duration_ms` for accurate TTR (avoids network latency skew)\n- Falls back to client-measured elapsed time for backward compatibility\n- Propagates the final TTR to both `liveUsage` and `currentMessage.tokenUsage`\n\n---\n\n`537-545`: **Bulk approval metric resets are correct.**\n\nThe reset sequence before each bulk approval (`resetLiveUsage()`, `lastTTRUpdateRef.current = 0`, `requestStartTimeRef.current = Date.now()`) ensures each tool call's metrics are measured independently, addressing the previous concern about inflated cumulative values.\n\n---\n\n`798-800`: **Throttle ref reset in `handleSendMessage` is correct.**\n\nThe `lastTTRUpdateRef` reset ensures the throttling cadence starts fresh for each new message, preventing stale timestamps from affecting the first TTR updates.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->", "created_at": "2025-12-28T15:53:07Z", "updated_at": "2025-12-28T15:53:07Z", "user": {"login": "coderabbitai", "id": null, "url": "https://github.com/apps/coderabbitai", "typename": "Bot"}}, {"id": "PRR_kwDOOBCuN87XeGat", "state": "APPROVED", "body": "Great work @Mahadevan2005 üëè Closing two issues in a single PR is well done.", "created_at": "2025-12-29T03:59:09Z", "updated_at": "2025-12-29T03:59:09Z", "user": {"login": "KaranJagtiani", "id": 39665675, "url": "https://github.com/KaranJagtiani", "typename": "User"}}], "candidate_name": "mahadevan2005", "pr_link": "https://github.com/skyflo-ai/skyflo/pull/74"}
{"pr_number": 99312, "title": "Add M.Mahadevan to contributors list", "body": "Before submitting this pull request, check the changes to see it's only the changes you made intentionally\r\nIf there are changes to other lines you didn't make deliberately, it's possible that your IDE made the changes with a utility like prettier.\r\nNext time, make sure that you only add your changes by using `git add -p` and rather than `git add Contributors.md`\r\n\r\nIf you're doing something in the checklist below, put an `x` inside `[ ]` so that `- [ ]` becomes `- [x]`\r\n\r\n- [ ] I had fun going through this tutorial („Éé^o^)„Éé and learned on the way Ÿ©(Ôºæ‚ó°Ôºæ)€∂\r\n- [ ] There are some things I'd like to improve in this tutorial. I have written them below.\r\n- [ ] There were steps where I had errors while following this tutorial. I have written them below.\r\n", "url": "https://github.com/firstcontributions/first-contributions/pull/99312", "state": "MERGED", "created_at": "2025-06-20T16:32:23Z", "updated_at": "2025-06-20T16:32:32Z", "closed_at": "2025-06-20T16:32:31Z", "merged_at": "2025-06-20T16:32:31Z", "merged": true, "additions": 1, "deletions": 0, "changed_files": 1, "author": {"login": "Mahadevan2005", "id": 115526891, "url": "https://github.com/Mahadevan2005", "typename": "User"}, "assignees": [], "labels": [], "comments_count": 1, "comments": [{"id": 2992208480, "body": "Hello @Mahadevan2005, congratulations! You've successfully submitted a pull request. üéâ\n\nIf you liked the tutorial, please star this repo by clicking the star button on the top right of this page. <img alt=\"star screenshot\" title=\"star button\" src=\"https://firstcontributions.github.io/assets/star.png\">\n\n# Next steps \n - Continue contributing: If you're looking for projects to contribute to, checkout our [<img src=\"https://avatars0.githubusercontent.com/u/65761570?s=88&u=640f39b808c75c6b86460aa907dd030bcca2f3c7&v=4\" width=\"22\" title=\"web app\" /> webapp](https://firstcontributions.github.io). \n - If you want more practice checkout [code contributions](https://github.com/roshanjossey/code-contributions). \n - Share on social media: You can share this content to help more people.\n   - [<img alt=\"bluesky\" title=\"bluesky\" src=\"https://edent.github.io/SuperTinyIcons/images/svg/bluesky.svg\" width=\"22\"> Post on Bluesky](https://bsky.app/intent/compose?text=Yay%21%20I%20just%20made%20my%20first%20open%20source%20contribution%20with%20%40FirstContributions.%20You%20can%20too%20by%20following%20a%20simple%20tutorial%20at%20https%3A%2F%2Fgoo.gl%2F66Axwe%20%23OpenSource%20%23FirstContribution%20%23Coding%20%23DevCommunity%20%23GitHub%20%23LearnToCode).\n   - [<img alt=\"facebook\" title=\"facebook\" src=\"https://edent.github.io/SuperTinyIcons/images/svg/facebook.svg\" width=\"22\"> share](https://www.facebook.com/sharer/sharer.php?u=https://roshanjossey.github.io/first-contributions&quote=Yay%21%20I%20just%20made%20my%20first%20open%20source%20contribution%20with%20First%20Contributions.%20You%20can%20too,%20by%20following%20a%20simple%20tutorial%20at%20https%3A//goo.gl/66Axwe&hashtag=%23OpenSource).\n   - [ <img alt=\"reddit\" title=\"reddit\" src=\"https://edent.github.io/SuperTinyIcons/images/svg/reddit.svg\" width=\"22\"> share](https://www.reddit.com/submit?url=https%3A%2F%2Fgithub.com%2Ffirstcontributions%2Ffirst-contributions&title=Learn%20how%20to%20contribute%20to%20open%20source%20projects%20in%205%20minutes).\n   - [<img alt=\"linkedin\" title=\"linkedin\" src=\"https://edent.github.io/SuperTinyIcons/images/svg/linkedin.svg\" width=\"22\"> post](https://www.linkedin.com/sharing/share-offsite/?url=https://github.com/firstcontributions/first-contributions).\n   - [<img alt=\"devio\" title=\"devio\" src=\"https://edent.github.io/SuperTinyIcons/images/svg/dev_to.svg\" width=\"22\"> publish](https://dev.to/new?prefill=---%0Atitle%3A%20First%20Contributions%3A%20learn%20how%20to%20contribute%20to%20open%20source%20projects%0Apublished%3A%20true%0Atags%3A%20opensource%2C%20beginners%2C%20tutorial%0A---%0A%0AI%20followed%20the%20hands-on%20tutorial%20in%20the%20Readme%20of%20first%20contributions%20and%20made%20my%20first%20pull%20request%20to%20the%20same%20repo.%0A%0A%0A%7B%25%20embed%20https%3A%2F%2Fgithub.com%2Ffirstcontributions%2Ffirst-contributions%20%25%7D).\n   - [<img src=\"https://edent.github.io/SuperTinyIcons/images/svg/hackernews.svg\" width=\"22\" title=\"HackerNews\" /> Post on HackerNews](https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fgithub.com%2Ffirstcontributions%2Ffirst-contributions&t=Show%20HN%3A%20Hands%20on%20tutorial%20for%20open%20source%20contribution).\n\nWe'd love to hear your thoughts about this project. Let us know how we can improve by commenting or opening an issue here.\n\n![celebration gif](https://c.tenor.com/LffD4a8ET9AAAAAC/heart-celebrate.gif)", "created_at": "2025-06-20T16:32:32Z", "updated_at": "2025-06-20T16:32:32Z", "user": {"login": "github-actions", "id": null, "url": "https://github.com/apps/github-actions", "typename": "Bot"}}], "reviews_count": 0, "reviews": [], "candidate_name": "mahadevan2005", "pr_link": "https://github.com/firstcontributions/first-contributions/pull/99312"}
